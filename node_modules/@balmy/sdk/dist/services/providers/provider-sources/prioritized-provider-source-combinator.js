"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PrioritizedProviderSourceCombinator = void 0;
const _chains_1 = require("../../../chains");
// This source will take a list of sources, sorted by priority, and use the first one possible
// that supports the given chain
class PrioritizedProviderSourceCombinator {
    constructor(sources) {
        this.sources = sources;
        if (sources.length === 0)
            throw new Error('Need at least one source to setup the provider source');
    }
    supportedChains() {
        return (0, _chains_1.chainsUnion)(this.sources.map((source) => source.supportedChains()));
    }
    getViemTransport({ chainId }) {
        const source = this.sources.find((source) => source.supportedChains().includes(chainId));
        if (!source)
            throw new Error(`Chain with id ${chainId} not supported`);
        return source.getViemTransport({ chainId });
    }
}
exports.PrioritizedProviderSourceCombinator = PrioritizedProviderSourceCombinator;
//# sourceMappingURL=prioritized-provider-source-combinator.js.map