"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FallbackProviderSource = void 0;
const viem_1 = require("viem");
const _chains_1 = require("../../../chains");
class FallbackProviderSource {
    constructor(sources, config) {
        this.sources = sources;
        this.config = config;
        if (sources.length === 0)
            throw new Error('Need at least one source to setup the provider source');
    }
    supportedChains() {
        return (0, _chains_1.chainsUnion)(this.sources.map((source) => source.supportedChains()));
    }
    getViemTransport({ chainId }) {
        const transports = this.sources
            .filter((source) => source.supportedChains().includes(chainId))
            .map((source) => source.getViemTransport({ chainId }));
        if (transports.length === 0)
            throw new Error(`Chain with id ${chainId} not supported`);
        return (0, viem_1.fallback)(transports, this.config);
    }
}
exports.FallbackProviderSource = FallbackProviderSource;
//# sourceMappingURL=fallback-provider.js.map